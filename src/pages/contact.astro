---
import Layout from '~/layouts/PageLayout.astro';
import ContactUs from '~/components/widgets/Contact.astro';
import Features2 from '~/components/widgets/Features2.astro';
import { getBrandFromHost } from '~/lib/brand';
import { BRANDS } from '~/lib/brands.config';
import { getImage, getImageAlt } from '~/data/imageInventory';
import type { ImageId } from '~/data/imageInventory';
import { resolveLocaleFromRequest } from '~/lib/locale';

const host = Astro.request.headers.get('host');
const brandKey = getBrandFromHost(host) || 'pedro';
if (brandKey === 'maisoncortes') {
  return Astro.redirect('/maison-cortes/contact');
}

const isUrgent = brandKey === 'urgent';
const isEtat = brandKey === 'etatdeslieux';
const isTransport = brandKey === 'transport';
const isLausanne = brandKey === 'lausanne';
const brand = BRANDS[brandKey] || BRANDS.pedro;
const defaultLocale = brandKey === 'laclemanexperience' ? 'en' : 'fr';
const locale = resolveLocaleFromRequest(Astro.request, defaultLocale);
const lang =
  brandKey === 'laclemanexperience'
    ? (['fr', 'en', 'de', 'it', 'ar', 'zh'].includes(locale) ? locale : defaultLocale)
    : isLausanne
      ? (['fr', 'en', 'de', 'it'].includes(locale) ? locale : 'fr')
      : 'fr';
const isEn = lang === 'en';
const isDe = lang === 'de';
const isIt = lang === 'it';
const isAr = lang === 'ar';
const isZh = lang === 'zh';
const lceT = <T,>(fr: T, en: T, de: T, it: T, ar?: T, zh?: T): T => {
  if (brandKey !== 'laclemanexperience') return fr;
  if (isEn) return en;
  if (isDe) return de;
  if (isIt) return it;
  if (isAr && ar !== undefined) return ar;
  if (isZh && zh !== undefined) return zh;
  return fr;
};
const lamT = <T,>(fr: T, en: T, de: T, it: T): T => {
  if (!isLausanne) return fr;
  if (isEn) return en;
  if (isDe) return de;
  if (isIt) return it;
  return fr;
};
const brandType =
  isUrgent
    ? 'urgent'
    : brandKey === 'transport'
      ? 'transport'
      : brandKey === 'debarras'
        ? 'debarras'
        : brandKey === 'videmaison'
          ? 'videmaison'
          : brandKey === 'videsuccession'
            ? 'videsuccession'
            : brandKey === 'nettoyagesuccession' || brandKey === 'lausannenettoyage'
              ? 'clean'
              : brandKey === 'etatdeslieux'
                ? 'etatdeslieux'
                : brandKey === 'laclemanexperience'
                  ? 'experience'
                  : 'move';
const img = (id: ImageId) => getImage(id);
const contactBgId =
  brandKey === 'urgent'
    ? 'inside_truck_unloading_couch'
    : brandKey === 'lausanne'
      ? 'men_loading_van_3'
      : brandKey === 'transport'
        ? 'professional_van_2'
  : brandKey === 'debarras'
    ? 'van_inside_objects_boxes_1'
        : brandKey === 'videmaison'
          ? 'strong_man_packing_1'
          : brandKey === 'videsuccession'
            ? 'empty_apartment_7'
            : brandKey === 'nettoyagesuccession' || brandKey === 'lausannenettoyage'
              ? 'man_cleaning'
              : brandKey === 'etatdeslieux'
                ? 'empty_apartment_10'
              : brandKey === 'laclemanexperience'
              ? 'leman_horizon_minimal_2'
              : 'hero_happy_boxes_plants';
const contactAlt = getImageAlt(contactBgId);

const views = {
  move: {
    hero: {
      tagline: 'Contact d√©m√©nagement',
      title: 'Un conseiller pour verrouiller vos acc√®s et votre planning',
      subtitle: 'R√©ponse < 24h, chef d‚Äô√©quipe d√©di√©, protections sol/murs et autorisations parking g√©r√©es.',
      background: `linear-gradient(135deg, rgba(15,23,42,0.72), rgba(30,64,175,0.62), rgba(12,18,36,0.7)), url('${img('hero_happy_boxes_plants')}')`,
      overlayClass: 'bg-gradient-to-br from-slate-900/45 via-blue-900/45 to-slate-800/55 backdrop-blur-[2px]',
      chips: ['R√©ponse < 24h', 'Chef d‚Äô√©quipe d√©di√©', 'Acc√®s et parkings valid√©s'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous pr√©parons',
      subtitle: 'Pour √©viter les surprises le jour J.',
      items: [
        { title: 'Acc√®s & parkings', description: 'Cr√©neaux ascenseur, distance de portage, autorisations communales.' },
        { title: 'Protection du mobilier', description: 'Housses matelas, coins mousse, couvertures et arrimage.' },
        { title: 'Planning clair', description: 'Heure d‚Äôarriv√©e, mat√©riel pr√©vu, chef de bord identifi√©.' },
      ],
    },
    checkpoints: ['Visio ou photos possibles', 'Devis d√©taill√© en CHF', 'Coordination WhatsApp si besoin'],
    accent: 'from-blue-500/25 via-slate-900/30 to-slate-900/45',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
  urgent: {
    hero: {
      tagline: 'Contact urgence',
      title: 'Appel imm√©diat, confirmation en 15 minutes',
      subtitle: 'Cr√©neau du jour ou du lendemain selon disponibilit√©. Protections pr√™tes, livraison directe sans stockage.',
      background: `linear-gradient(135deg, rgba(185,28,28,0.78), rgba(239,68,68,0.64), rgba(249,115,22,0.5)), url('${img('men_loading_van_2')}')`,
      overlayClass: 'bg-gradient-to-br from-red-900/30 via-red-800/28 to-orange-600/24 backdrop-blur-[1px]',
      chips: ['R√©ponse < 5 min', 'D√©part 60‚Äì90 min', 'Arc l√©manique'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous verrouillons en urgence',
      subtitle: 'Coordination minute par minute.',
      items: [
        { title: 'Acc√®s confirm√©s', description: 'Appel direct pour valider parkings et ascenseurs.' },
        { title: 'Camion pr√™t', description: 'Protections et arrimage renforc√© d√©j√† charg√©s.' },
        { title: 'Trajet direct', description: 'Pas de stockage, livraison imm√©diate au lieu d‚Äôarriv√©e.' },
      ],
    },
    checkpoints: ['Chef urgence d√©di√©', 'WhatsApp en direct', 'Assurance incluse'],
    accent: 'from-red-600/30 via-red-800/35 to-orange-600/35',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
  transport: {
    hero: {
      tagline: 'Contact transport',
      title: 'Fen√™tre horaire serr√©e et arrimage premium',
      subtitle: 'Mobilier design, √©lectrom√©nager, bureaux : conditionnement, calage et suivi chauffeur.',
      background: `linear-gradient(135deg, rgba(12,18,32,0.88), rgba(31,42,68,0.8), rgba(242,176,69,0.24)), url('${img('professional_van_2')}')`,
      overlayClass: 'bg-gradient-to-br from-slate-950/55 via-slate-900/55 to-amber-200/18 backdrop-blur-[2px]',
      chips: ['Fen√™tre courte', 'Arrimage renforc√©', 'Suivi direct chauffeur'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous pr√©parons',
      subtitle: 'Pour vos pi√®ces sensibles ou volumineuses.',
      items: [
        { title: 'Dimensions & fragilit√©', description: 'Brief rapide pour pr√©voir calage et protections.' },
        { title: 'Fen√™tre horaire', description: 'Passage √† l‚Äôheure convenue, chauffeur joignable.' },
        { title: 'Livraison pr√©cise', description: 'Placement, reprise des protections principales.' },
      ],
    },
    checkpoints: ['Coins mousse & filmage', 'Calage anti-glisse', 'Preuves photo sur demande'],
    accent: 'from-amber-200/18 via-slate-800/35 to-slate-950/55',
    formAccent: 'from-amber-400/55 via-slate-900/90 to-amber-200/45',
  },
  debarras: {
    hero: {
      tagline: 'Contact d√©barras',
      title: 'D√©barras complet, tri√© et valoris√©',
      subtitle: 'Appartements, caves, bureaux : tri, dons/recyclage et remise propre sans coordonner plusieurs √©quipes.',
      background: `linear-gradient(135deg, rgba(6,95,70,0.78), rgba(16,185,129,0.62), rgba(15,23,42,0.6)), url('${img('men_moving_heavy_couch_block')}')`,
      overlayClass: 'bg-gradient-to-br from-emerald-900/55 via-emerald-800/55 to-slate-900/55',
      chips: ['Tri & dons', 'Protection des communs', 'Rapport photo'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous cadrons',
      subtitle: 'Pour vider vite et propre.',
      items: [
        { title: 'Volume & acc√®s', description: 'Photos ou visite express pour pr√©parer le portage.' },
        { title: 'Tri sur place', description: 'R√©emploi en priorit√©, recyclage, √©vacuation contr√¥l√©e.' },
        { title: 'Remise propre', description: 'Balayage ou m√©nage optionnel, photos avant/apr√®s.' },
      ],
    },
    checkpoints: ['Cr√©neau sous quelques jours', 'Chef d‚Äô√©quipe unique', 'Centres agr√©√©s'],
    accent: 'from-emerald-500/25 via-emerald-800/30 to-slate-900/40',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
  experience: {
    hero: {
      tagline: lceT('Contact concierge', 'Concierge contact', 'Concierge Kontakt', 'Contatto concierge', 'ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÉŸàŸÜÿ≥Ÿäÿ±ÿ¨', 'Á§ºÂÆæËÅîÁ≥ª'),
      title: lceT('Lac L√©man Experience', 'Lake Geneva Experience', 'Lake Geneva Experience', 'Lake Geneva Experience', 'ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ®ÿ≠Ÿäÿ±ÿ© ŸÑŸäŸÖÿßŸÜ', 'Ëé±ËíôÊπñ‰ΩìÈ™å'),
      subtitle: lceT(
        'Croisi√®res priv√©es, vignobles UNESCO, tables d‚Äôh√¥tes et √©chapp√©es alpines orchestr√©es de bout en bout.',
        'Private cruises, UNESCO vineyards, hosted tables and alpine escapes orchestrated end-to-end.',
        'Private Cruises, UNESCO-Weinberge, Gastgebertafeln und alpine Auszeiten von A bis Z orchestriert.',
        'Crociere private, vigneti UNESCO, tavole d‚Äôh√¥tes e fughe alpine orchestrate da A a Z.',
        'ÿ±ÿ≠ŸÑÿßÿ™ ÿÆÿßÿµÿ©ÿå ŸÉÿ±ŸàŸÖ ÿßŸÑŸäŸàŸÜÿ≥ŸÉŸàÿå ŸÖŸàÿßÿ¶ÿØ ŸÖÿ∂ŸäŸÅÿ© ŸàŸáÿ±Ÿàÿ® ŸÑŸÑÿ£ŸÑÿ® ŸÖŸÜÿ≥ŸÇÿ© ÿ®ÿßŸÑŸÉÿßŸÖŸÑ.',
        'ÁßÅ‰∫´Ê∏∏Ëàπ„ÄÅËÅîÂêàÂõΩÊïôÁßëÊñáÁªÑÁªáËë°ËêÑÂõ≠„ÄÅÁßÅÂÆ¥‰∏éÈ´òÂ±±Â∫¶ÂÅáÔºåÂÖ®Á®ãÁªüÁ≠π„ÄÇ'
      ),
      background: `linear-gradient(135deg, rgba(15,118,110,0.28), rgba(30,41,59,0.34), rgba(253,230,138,0.22)), url('${img('quiet_luxury_lake_lifestyle')}')`,
      overlayClass: 'bg-gradient-to-br from-emerald-950/30 via-slate-900/40 to-amber-100/22',
      chips: lceT(
        ['Conciergerie d√©di√©e', 'Partenaires tri√©s', 'Privatisations'],
        ['Dedicated concierge', 'Vetted partners', 'Privatisations'],
        ['Dedizierter Concierge', 'Gepr√ºfte Partner', 'Privatisierungen'],
        ['Concierge dedicato', 'Partner selezionati', 'Privatizzazioni'],
        ['ŸÉŸàŸÜÿ≥Ÿäÿ±ÿ¨ ŸÖÿÆÿµÿµ', 'ÿ¥ÿ±ŸÉÿßÿ° ŸÖÿÆÿ™ÿßÿ±ŸàŸÜ', 'ÿÆÿµÿÆÿµÿ© ŸÅÿπŸÑŸäÿ©'],
        ['‰∏ìÂ±ûÁ§ºÂÆæ', 'ÁîÑÈÄâ‰ºô‰º¥', 'ÁúüÂÆûÁßÅ‰∫´']
      ),
      tone: 'dark',
    },
    info: {
      title: lceT('Ce que nous verrouillons', 'What we lock in', 'Was wir fixieren', 'Cosa blocchiamo', 'ŸÖÿß ÿßŸÑÿ∞Ÿä ŸÜÿ´ÿ®ÿ™Ÿá', 'Êàë‰ª¨‰∏∫ÊÇ®ÈîÅÂÆö‰ªÄ‰πà'),
      subtitle: lceT(
        'Itin√©raires, partenaires, transferts.',
        'Itineraries, partners, transfers.',
        'Routen, Partner, Transfers.',
        'Itinerari, partner, transfer.',
        'ÿßŸÑŸÖÿ≥ÿßÿ±ÿßÿ™ÿå ÿßŸÑÿ¥ÿ±ŸÉÿßÿ°ÿå ÿßŸÑÿ™ŸÜŸÇŸÑÿßÿ™.',
        'Ë°åÁ®ã„ÄÅ‰ºô‰º¥„ÄÅÊé•È©≥„ÄÇ'
      ),
      items: [
        {
          title: lceT('Programme', 'Program', 'Programm', 'Programma', 'ÿßŸÑÿ®ÿ±ŸÜÿßŸÖÿ¨', 'Ë°åÁ®ã'),
          description: lceT(
            'Dates, horaires sunset, plan B m√©t√©o.',
            'Dates, sunset slots, weather plan B.',
            'Daten, Sunset-Slots, Wetter-Plan B.',
            'Date, orari sunset, piano B meteo.',
            'ÿ™Ÿàÿßÿ±ŸäÿÆÿå ÿ£ŸàŸÇÿßÿ™ ÿßŸÑÿ∫ÿ±Ÿàÿ®ÿå ÿÆÿ∑ÿ© ÿ∑ŸÇÿ≥ ÿ®ÿØŸäŸÑÿ©.',
            'Êó•Êúü„ÄÅÊó•ËêΩÊ°£Êúü„ÄÅÂ§©Ê∞îBÊ°à„ÄÇ'
          ),
        },
        {
          title: lceT('Partenaires', 'Partners', 'Partner', 'Partner', 'ÿßŸÑÿ¥ÿ±ŸÉÿßÿ°', '‰ºô‰º¥'),
          description: lceT(
            'Bateaux priv√©s, caves UNESCO, tables d‚Äôh√¥tes.',
            'Private boats, UNESCO cellars, hosted tables.',
            'Private Boote, UNESCO-Keller, Gastgebertafeln.',
            'Barche private, cantine UNESCO, tavole d‚Äôh√¥tes.',
            'ŸÇŸàÿßÿ±ÿ® ÿÆÿßÿµÿ©ÿå ÿ≥ÿ±ÿßÿØŸäÿ® ŸäŸàŸÜŸäÿ≥ŸÉŸàÿå ŸÖŸàÿßÿ¶ÿØ ŸÖÿ∂ŸäŸÅÿ©.',
            'ÁßÅÂÆ∂Ëàπ„ÄÅËÅîÂêàÂõΩÊïôÁßëÊñáÁªÑÁªáÈÖíÁ™ñ„ÄÅÁßÅÂÆ¥„ÄÇ'
          ),
        },
        {
          title: lceT('Transferts', 'Transfers', 'Transfers', 'Transfer', 'ÿßŸÑÿ™ŸÜŸÇŸÑÿßÿ™', 'Êé•ÈÄÅ'),
          description: lceT(
            'Chauffeur priv√© ou bateau-taxi coordonn√©.',
            'Private driver or boat taxi coordinated.',
            'Privater Fahrer oder Bootstaxi koordiniert.',
            'Autista privato o taxi boat coordinato.',
            'ÿ≥ÿßÿ¶ŸÇ ÿÆÿßÿµ ÿ£Ÿà ÿ™ÿßŸÉÿ≥Ÿä ÿ®ÿ≠ÿ±Ÿä ŸÖŸÜÿ≥ŸÇ.',
            '‰∏ìËΩ¶ÊàñÊ∞¥‰∏äÊé•È©≥ÂçèË∞ÉÂà∞‰Ωç„ÄÇ'
          ),
        },
      ],
    },
    checkpoints: lceT(
      ['Concierge unique', 'Privatisation garantie', 'Brief discret des h√¥tes'],
      ['Single concierge', 'Guaranteed privatisation', 'Discreet host brief'],
      ['Ein Concierge', 'Garantierte Privatisierung', 'Diskretes Host-Briefing'],
      ['Concierge unico', 'Privatizzazione garantita', 'Brief discreto degli host'],
      ['ŸÉŸàŸÜÿ≥Ÿäÿ±ÿ¨ Ÿàÿßÿ≠ÿØ', 'ÿÆÿµÿÆÿµÿ© ŸÖÿ∂ŸÖŸàŸÜÿ©', 'ÿ•ÿ≠ÿßÿ∑ÿ© ŸÖÿ∂ŸäŸÅŸäŸÜ ÿ®ÿ≥ÿ±Ÿäÿ©'],
      ['‰∏Ä‰ΩçÁ§ºÂÆæ', '‰øùËØÅÁßÅ‰∫´', '‰ΩéË∞ÉÂØπÊé•‰∏ª‰∫∫']
    ),
    accent: 'from-emerald-200/30 via-emerald-700/20 to-amber-100/30',
    formAccent: 'from-white/92 via-emerald-50/92 to-white/92',
  },
  videmaison: {
    hero: {
      tagline: 'Contact vide maison',
      title: 'Vide maison complet et ordonn√©',
      subtitle: 'Tri, dons, recyclage et √©vacuation en une seule √©quipe. Rapport photo et remise propre.',
      background: `linear-gradient(135deg, rgba(197,143,85,0.26), rgba(160,112,70,0.3), rgba(117,78,45,0.2)), url('${img('strong_man_packing_1')}')`,
      overlayClass: 'bg-gradient-to-br from-[#3b2a18]/12 via-[#5a3b1f]/10 to-[#8c6136]/10',
      chips: ['Orientation dons', 'Respect des lieux', 'Remise propre'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous verrouillons',
      subtitle: 'Pour rendre le bien pr√™t √† louer/vendre.',
      items: [
        { title: 'Acc√®s & voisinage', description: 'Notification voisins si besoin, protections sols/murs.' },
        { title: 'Tri & √©vacuation', description: 'Dons, recyclage, puis √©vacuation contr√¥l√©e.' },
        { title: 'Photos finales', description: 'Avant/apr√®s pour bailleurs ou famille.' },
      ],
    },
    checkpoints: ['Cr√©neau rapide', 'Chef unique', 'Option m√©nage finale'],
    accent: 'from-amber-500/25 via-orange-700/30 to-amber-900/35',
    formAccent: 'from-white/90 via-amber-50/90 to-white/90',
  },
  videsuccession: {
    hero: {
      tagline: 'Contact vide succession',
      title: 'Gestion discr√®te des biens successoraux',
      subtitle: 'Tri, inventaire succinct, √©vacuation et remise propre. Coordination h√©ritiers et notaires.',
      background: `linear-gradient(135deg, rgba(15,17,27,0.9), rgba(217,119,6,0.52), rgba(0,0,0,0.72)), url('${img('empty_apartment_7')}')`,
      overlayClass: 'bg-gradient-to-br from-gray-950/65 via-gray-900/60 to-amber-600/45',
      chips: ['Discr√©tion', 'Inventaire succinct', 'Reporting photo'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous cadrons',
      subtitle: 'Pour √©viter les frictions entre parties prenantes.',
      items: [
        { title: 'Consignes h√©ritiers/notaire', description: 'Objets √† conserver, √† mettre de c√¥t√©, √† √©vacuer.' },
        { title: 'Tri & d√©montage', description: 'S√©paration, d√©montage, acheminement centre agr√©√©.' },
        { title: 'Remise propre', description: 'Nettoyage l√©ger ou complet, photos finales.' },
      ],
    },
    checkpoints: ['Contact unique', 'Rapport clair', 'Cr√©neau rapide'],
    accent: 'from-amber-500/20 via-amber-700/30 to-slate-900/45',
    formAccent: 'from-gray-950/50 via-gray-900/70 to-amber-600/20',
  },
  clean: {
    hero: {
      tagline: 'Contact nettoyage',
      title: 'Propret√© ma√Ætris√©e, d√©lais rapides',
      subtitle: 'Checklist pro, produits adapt√©s et contr√¥le qualit√© syst√©matique pour appartements, bureaux ou fin de chantier.',
      background: `linear-gradient(135deg, rgba(34,211,238,0.52), rgba(14,165,233,0.55), rgba(15,23,42,0.7)), url('${img('man_cleaning')}')`,
      overlayClass: 'bg-gradient-to-br from-cyan-200/35 via-cyan-500/40 to-slate-900/60 backdrop-blur-[2px]',
      chips: ['Checklist bailleur', 'Mat√©riel pro', 'Photos sur demande'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous pr√©parons',
      subtitle: 'Pour une remise sans remarques.',
      items: [
        { title: 'Zones critiques', description: 'Cuisine, sdb, vitres et sols prioris√©s.' },
        { title: 'Mat√©riel adapt√©', description: 'Monobrosse/aspirateurs HEPA si n√©cessaire.' },
        { title: 'Photos', description: 'Avant/apr√®s ou contr√¥le qualit√© selon besoin.' },
      ],
    },
    checkpoints: ['Cr√©neau rapide', 'Option d√©sinfection', 'Facture d√©taill√©e'],
    accent: 'from-cyan-300/25 via-cyan-500/25 to-slate-900/45',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
  etatdeslieux: {
    hero: {
      tagline: 'Contact √©tat des lieux',
      title: 'Constats pr√©cis, rapports photo, d√©lais serr√©s',
      subtitle: 'Entr√©e ou sortie : check-list bail, photos horodat√©es et rapport envoy√© rapidement.',
      background: `linear-gradient(135deg, rgba(255,255,255,0.25), rgba(224,242,254,0.25)), url('${img('empty_apartment_11')}')`,
      overlayClass: 'bg-gradient-to-br from-sky-800/08 via-white/18 to-white/30',
      chips: ['Rapport < 24h', 'Check-list bailleur', 'Photos horodat√©es'],
      tone: 'light',
    },
    info: {
      title: 'Ce que nous verrouillons',
      subtitle: 'Pour un constat solide et neutre.',
      items: [
        { title: 'Planification', description: 'Cr√©neau confirm√©, acc√®s valid√©s.' },
        { title: 'Relev√©s sur place', description: 'Photos, mesures, checklist compl√®te.' },
        { title: 'Rapport & envoi', description: 'PDF + galerie photo, partage aux parties.' },
      ],
    },
    checkpoints: ['Coordination r√©gie', 'Remarques actionnables', 'Options nettoyage/d√©Barras'],
    accent: 'from-sky-200/35 via-white/70 to-white/85',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
};

let view = views[brandType];
if (isLausanne && brandType === 'move') {
  view = {
    ...view,
    hero: {
      ...view.hero,
      tagline: lamT('Contact d√©m√©nagement', 'Moving contact', 'Umzug Kontakt', 'Contatto trasloco'),
      title: lamT('Un conseiller pour verrouiller vos acc√®s et votre planning', 'A consultant to lock access and schedule', 'Ein Berater, der Zugang und Planung fixiert', 'Un consulente per bloccare accessi e planning'),
      subtitle: lamT(
        'R√©ponse < 24h, chef d‚Äô√©quipe d√©di√©, protections sol/murs et autorisations parking g√©r√©es.',
        '< 24h response, dedicated crew lead, floor/wall protections and parking permits handled.',
        '< 24h Antwort, dedizierter Teamleiter, Boden-/Wandschutz und Parkbewilligungen erledigt.',
        'Risposta < 24h, caposquadra dedicato, protezioni pavimenti/pareti e permessi parcheggio gestiti.'
      ),
    },
    info: {
      ...view.info,
      title: lamT('Ce que nous pr√©parons', 'What we prepare', 'Was wir vorbereiten', 'Cosa prepariamo'),
      subtitle: lamT('Pour √©viter les surprises le jour J.', 'To avoid surprises on moving day.', 'Um √úberraschungen am Tag X zu vermeiden.', 'Per evitare sorprese il giorno J.'),
      items: [
        { title: lamT('Acc√®s & parkings', 'Access & parking', 'Zug√§nge & Parkpl√§tze', 'Accessi & parcheggi'), description: lamT('Cr√©neaux ascenseur, distance de portage, autorisations communales.', 'Lift slots, carry distance, municipal permits.', 'Lift-Slots, Tragedistanz, kommunale Bewilligungen.', 'Slot ascensore, distanza di trasporto, permessi comunali.') },
        { title: lamT('Protection du mobilier', 'Furniture protection', 'M√∂belschutz', 'Protezione mobili'), description: lamT('Housses matelas, coins mousse, couvertures et arrimage.', 'Mattress bags, foam corners, blankets and strapping.', 'Matratzenh√ºllen, Schaumstoff-Ecken, Decken und Verzurrung.', 'Sacchi materasso, angoli in gommapiuma, coperte e fissaggi.') },
        { title: lamT('Planning clair', 'Clear schedule', 'Klarer Plan', 'Planning chiaro'), description: lamT('Heure d‚Äôarriv√©e, mat√©riel pr√©vu, chef de bord identifi√©.', 'Arrival time, planned gear, crew lead identified.', 'Ankunftszeit, geplantes Material, Teamleiter benannt.', 'Orario di arrivo, materiale previsto, caposquadra identificato.') },
      ],
    },
    checkpoints: [
      lamT('Visio ou photos possibles', 'Video or photos possible', 'Video oder Fotos m√∂glich', 'Video o foto possibili'),
      lamT('Devis d√©taill√© en CHF', 'Detailed CHF quote', 'Detaillierte CHF-Offerte', 'Preventivo dettagliato in CHF'),
      lamT('Coordination WhatsApp si besoin', 'WhatsApp coordination if needed', 'WhatsApp-Koordination bei Bedarf', 'Coordinamento WhatsApp se serve'),
    ],
  };
}
const metadata = isUrgent
  ? {
      title: 'Contact urgence',
      description: 'Intervention express, r√©ponse en < 15 minutes pendant les horaires urgents.',
      ignoreTitleTemplate: true,
    }
  : brandKey === 'laclemanexperience'
    ? {
        title: lceT(
          'Contact conciergerie Lac L√©man',
          'Lake Geneva experiences ‚Äî contact',
          'Lake Geneva Experiences ‚Äî Kontakt',
          'Esperienze Lac L√©man ‚Äî contatto',
          'ÿ™ŸàÿßÿµŸÑ ÿ™ÿ¨ÿßÿ±ÿ® ÿ®ÿ≠Ÿäÿ±ÿ© ŸÑŸäŸÖÿßŸÜ',
          'Ëé±ËíôÊπñ‰ΩìÈ™å ‚Äî ËÅîÁ≥ª'
        ),
        description: lceT(
          'Croisi√®res priv√©es, vignobles UNESCO, tables d‚Äôh√¥tes et √©chapp√©es alpines avec concierge d√©di√©.',
          'Private cruises, UNESCO vineyards, hosted tables and alpine escapes with a dedicated concierge.',
          'Private Cruises, UNESCO-Weinberge, Gastgebertafeln und alpine Auszeiten mit dediziertem Concierge.',
          'Crociere private, vigneti UNESCO, tavole d‚Äôh√¥tes e fughe alpine con concierge dedicato.',
          'ÿ±ÿ≠ŸÑÿßÿ™ ÿÆÿßÿµÿ©ÿå ŸÉÿ±ŸàŸÖ ÿßŸÑŸäŸàŸÜÿ≥ŸÉŸàÿå ŸÖŸàÿßÿ¶ÿØ ŸÖÿ∂ŸäŸÅÿ© ŸàŸáÿ±Ÿàÿ® ŸÑŸÑÿ£ŸÑÿ® ŸÖÿπ ŸÉŸàŸÜÿ≥Ÿäÿ±ÿ¨ ŸÖÿÆÿµÿµ.',
          'ÁßÅ‰∫´Ê∏∏Ëàπ„ÄÅËÅîÂêàÂõΩÊïôÁßëÊñáÁªÑÁªáËë°ËêÑÂõ≠„ÄÅÁßÅÂÆ¥‰∏éÈ´òÂ±±‰ΩìÈ™åÔºå‰∏ìÂ±ûÁ§ºÂÆæÈöèË°å„ÄÇ'
        ),
      }
    : brandKey === 'lausanne'
      ? {
          title: lamT('Contact d√©m√©nagement Lausanne', 'Lausanne moving contact', 'Kontakt Umzug Lausanne', 'Contatto trasloco Losanna'),
          description: lamT(
            'Planification, acc√®s urbains et devis d√©taill√© sous 24h pour Lausanne & Vaud.',
            'Planning, urban access and detailed quote within 24h for Lausanne & Vaud.',
            'Planung, Stadtzug√§nge und detaillierte Offerte innert 24h f√ºr Lausanne & Waadt.',
            'Pianificazione, accessi urbani e preventivo dettagliato entro 24h per Losanna & Vaud.'
        ),
      }
    : {
        title: 'Contact',
      };

export const prerender = false;
const toneStrong = view.hero.tone === 'dark' ? 'text-white' : 'text-slate-900';
const toneMuted = view.hero.tone === 'dark' ? 'text-white/85' : 'text-slate-600';
const formTitle =
  isUrgent
    ? 'Obtenir un devis express'
    : brandKey === 'transport'
      ? 'Obtenir un devis transport'
      : brandKey === 'laclemanexperience'
        ? lceT(
            'R√©server une exp√©rience',
            'Reserve an experience',
            'Eine Experience reservieren',
            'Prenotare un‚Äôesperienza',
            'ÿ≠ÿ¨ÿ≤ ÿ™ÿ¨ÿ±ÿ®ÿ©',
            'È¢ÑËÆ¢‰ΩìÈ™å'
          )
        : isLausanne
          ? lamT('Obtenir un devis pr√©cis', 'Get a detailed quote', 'Detaillierte Offerte anfordern', 'Ottieni un preventivo dettagliato')
          : 'Obtenir un devis pr√©cis';
const formSubtitle =
  isUrgent
    ? 'Formulaire prioritaire pour planifier une intervention imm√©diate.'
    : brandKey === 'transport'
      ? 'Expliquez le volume et les adresses : cr√©neau pr√©cis et protections adapt√©es.'
      : brandKey === 'laclemanexperience'
        ? lceT(
            'Donnez vos dates et envies, nous envoyons une proposition verrouill√©e.',
            'Tell us your dates and preferences, we send a locked proposal.',
            'Nennen Sie Termine und W√ºnsche, wir senden einen fixierten Vorschlag.',
            'Dateci date e preferenze, inviamo una proposta bloccata.',
            'ÿ£ÿÆÿ®ÿ±ŸàŸÜÿß ÿ®ÿßŸÑÿ™Ÿàÿßÿ±ŸäÿÆ ŸàÿßŸÑÿ±ÿ∫ÿ®ÿßÿ™ÿå ŸÜÿ±ÿ≥ŸÑ ŸÖŸÇÿ™ÿ±ÿ≠ÿßŸã ŸÖÿ≠ŸÉŸÖÿßŸã.',
            'ÂëäËØâÊàë‰ª¨Êó•ÊúüÂíåÂÅèÂ•ΩÔºåÊàë‰ª¨ÂèëÂá∫ÈîÅÂÆöÊñπÊ°à„ÄÇ'
          )
        : isLausanne
          ? lamT(
              'Formulaire complet pour un chiffrage clair d√®s le premier √©change.',
              'Complete form for a clear quote from the first exchange.',
              'Vollst√§ndiges Formular f√ºr eine klare Offerte ab dem ersten Austausch.',
              'Modulo completo per un preventivo chiaro fin dal primo scambio.'
            )
          : 'Formulaire complet pour un chiffrage clair d√®s le premier √©change.';

const leadIntentOptions =
  brandType === 'transport'
    ? [
        { value: 'standard_transport', label: 'Fen√™tre horaire pr√©cise', description: 'Livraison point √† point avec chauffeur joignable.' },
        { value: 'design_or_heavy', label: 'Pi√®ce design / lourde', description: 'Objet volumineux ou fragile n√©cessitant calage renforc√©.' },
        { value: 'office_rotation', label: 'Bureaux / rotation', description: 'Plusieurs postes, besoin de prot√©ger et d‚Äô√©tiqueter.' },
      ]
    : brandType === 'clean'
      ? [
          { value: 'end_of_lease', label: 'Nettoyage fin de bail', description: 'Checklist bailleur, vitres et sols prioris√©s.' },
          { value: 'after_move', label: 'Apr√®s d√©m√©nagement', description: 'Remise propre imm√©diate apr√®s le d√©part.' },
          { value: 'office_clean', label: 'Bureaux / commerces', description: 'Passage en horaires flexibles, zones critiques cibl√©es.' },
        ]
      : isUrgent
        ? [
            { value: 'urgent_today', label: 'Intervention aujourd‚Äôhui', description: 'Cr√©neau prioritaire avec confirmation en 15 minutes.' },
            { value: 'tomorrow', label: 'Demain / tr√®s proche', description: 'Planification express avec protections pr√™tes.' },
            { value: 'access_complex', label: 'Acc√®s sensible', description: 'Escaliers √©troits, parking compliqu√© ou voisins √† pr√©venir.' },
          ]
        : [
            { value: 'standard_move', label: 'D√©m√©nagement standard', description: 'Planifi√©, avec verrouillage des acc√®s et protections.' },
            { value: 'heavy_item', label: 'Objet lourd / piano', description: 'Portage complexe, calage sp√©cifique ou monte-meubles.' },
            { value: 'access_complex', label: 'Acc√®s sensibles', description: 'Ascenseur restreint, distance > 30m ou voisins √† pr√©venir.' },
            { value: 'cleaning_only', label: 'Nettoyage uniquement', description: 'Remise propre ou √©tat des lieux sans transport.' },
          ];

const priceAnchors =
  brandType === 'urgent'
    ? [
        { title: 'Intervention urgente', range: 'CHF 550 ‚Äì 1‚Äô100', drivers: ['Cr√©neau du jour ou du lendemain', 'Renfort +30‚Äì70% selon l‚Äôheure'] },
        { title: 'Transport express pi√®ce unique', range: 'CHF 290 ‚Äì 520', drivers: ['Arc l√©manique', 'Arrimage et protections inclus'] },
      ]
    : brandType === 'transport'
      ? [
          { title: 'Livraison mobilier design', range: 'CHF 350 ‚Äì 780', drivers: ['Calage, sanglage, coins mousse'] },
          { title: 'Fen√™tre horaire d√©di√©e', range: 'CHF 450 ‚Äì 950', drivers: ['Passage pr√©cis', 'Suivi direct chauffeur'] },
        ]
      : brandType === 'clean'
        ? [
            { title: 'Fin de bail 2‚Äì3 pi√®ces', range: 'CHF 420 ‚Äì 780', drivers: ['Vitres, sanitaires, sols'] },
            { title: 'Remise apr√®s d√©m√©nagement', range: 'CHF 280 ‚Äì 520', drivers: ['Zones critiques', 'Option d√©sinfection'] },
          ]
        : [
            { title: 'D√©m√©nagement local 2‚Äì3h', range: 'CHF 450 ‚Äì 900', drivers: ['Acc√®s, volume, protections'] },
            { title: 'Cr√©neau week-end / soir', range: 'CHF 580 ‚Äì 1‚Äô050', drivers: ['Disponibilit√© √©quipe', 'Coordination parking'] },
          ];

const trustFacts = [
  'Plus de 1‚Äô200 interventions sur l‚Äôarc l√©manique',
  'RC Pro et responsabilit√© civile incluses',
  'Chef d‚Äô√©quipe identifi√© avant le jour J',
  'Rapport photo disponible sur demande',
];

const processStates = [
  'Lead re√ßu ‚Üí qualification (acc√®s, dates, volume)',
  'Validation manuelle si acc√®s sensibles ou objets lourds',
  'Confirmation √©crite avec cr√©neau et chef d√©di√©',
  'Plan B : adaptation m√©t√©o/acc√®s, notification proactive',
];
---

<Layout metadata={metadata} brandKey={brandKey}>
  <section
    class={`relative overflow-hidden brand-${brandKey} contact-hero-light`}
    style={`background-image:${view.hero.background}; background-size: cover; background-position: center;`}
    aria-label={contactAlt}
  >
    <div class={`absolute inset-0 ${view.hero.overlayClass?.replace(/0\\.\\d+/g, (m) => (Number(m) * 0.7).toFixed(2)) || ''}`}></div>
    <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-14 md:py-18 grid gap-10 md:grid-cols-[1fr_1fr] items-start">
      <div class="space-y-6">
        <p class={`text-sm uppercase tracking-[0.32em] ${toneMuted}`}>{view.hero.tagline}</p>
        <h1 class={`text-4xl md:text-5xl font-semibold leading-tight ${toneStrong}`}>{view.hero.title}</h1>
        <p class={`text-lg md:text-xl max-w-3xl ${toneMuted}`}>{view.hero.subtitle}</p>
        <div class="flex flex-wrap gap-3">
          {view.hero.chips.map((chip) => (
            <span
              class={`rounded-full px-3 py-1.5 text-xs font-semibold ${
                view.hero.tone === 'dark'
                  ? 'bg-white/15 border border-white/20 text-white backdrop-blur'
                  : 'bg-sky-100 border border-sky-200 text-slate-900'
              }`}
            >
              {chip}
            </span>
          ))}
        </div>
        <div class="grid sm:grid-cols-3 gap-3 text-sm">
          {view.checkpoints.map((item) => (
            <div
              class={`rounded-xl px-4 py-3 shadow-lg ${
                view.hero.tone === 'dark'
                  ? 'bg-white/10 border border-white/20 text-white/90 backdrop-blur'
                  : 'bg-white border border-slate-200 text-slate-900'
              }`}
            >
              {item}
            </div>
          ))}
        </div>
      </div>
      <div class="relative">
        <div class={`absolute -inset-6 blur-3xl opacity-70 bg-gradient-to-br ${view.accent}`}></div>
        <div
          class={`relative rounded-3xl backdrop-blur-lg shadow-2xl p-8 space-y-4 ${
            view.hero.tone === 'dark'
              ? 'border border-white/20 bg-white/10 text-white'
              : 'border border-slate-200/60 bg-white/92 text-slate-900'
          }`}
        >
          <p
            class={`text-xs uppercase tracking-[0.3em] ${
              view.hero.tone === 'dark' ? 'text-white/70' : 'text-slate-500'
            }`}
          >
            Ce qui change selon vous
          </p>
          <h3 class="text-2xl font-semibold leading-tight">{view.info.title}</h3>
          <p class={view.hero.tone === 'dark' ? 'text-white/85' : 'text-slate-700'}>{view.info.subtitle}</p>
          <div class="space-y-3">
            {view.info.items.map((item) => (
              <div class="flex gap-3">
                <div
                  class={`mt-1 h-2 w-2 rounded-full ${
                    view.hero.tone === 'dark' ? 'bg-white/70' : 'bg-sky-500/70'
                  }`}
                ></div>
                <div>
                  <p class={`font-semibold text-${view.hero.tone === 'dark' ? 'white' : 'slate-900'}`}>{item.title}</p>
                  <p class={`${view.hero.tone === 'dark' ? 'text-white/80' : 'text-slate-700'} text-sm leading-relaxed`}>
                    {item.description}
                  </p>
                </div>
              </div>
            ))}
          </div>
          <div
            class={`grid grid-cols-[minmax(0,0.6fr)_minmax(0,1.4fr)] md:grid-cols-[minmax(0,0.55fr)_minmax(0,1.45fr)] gap-2.5 pt-2 text-sm ${
              view.hero.tone === 'dark' ? 'text-white/80' : 'text-slate-700'
            }`}
          >
            <div
              class={`rounded-lg px-3 py-2 flex flex-col gap-0.5 min-w-0 ${
                view.hero.tone === 'dark'
                  ? 'border border-white/20 bg-white/5'
                  : 'border border-sky-200/60 bg-white/90'
              }`}
            >
              <span class={view.hero.tone === 'dark' ? 'text-white/80' : 'text-slate-600'}>T√©l√©phone</span>
              <span class={`${view.hero.tone === 'dark' ? 'text-white' : 'text-slate-900'} font-semibold whitespace-nowrap text-sm`}>
                {brand.phone}
              </span>
            </div>
            <div
              class={`rounded-lg px-3 py-2 flex flex-col gap-0.5 overflow-hidden min-w-0 ${
                view.hero.tone === 'dark'
                  ? 'border border-white/20 bg-white/5'
                  : 'border border-sky-200/60 bg-white/90'
              }`}
            >
              <span class={view.hero.tone === 'dark' ? 'text-white/80' : 'text-slate-600'}>Email</span>
              <span
              class={`${
                  view.hero.tone === 'dark' ? 'text-white' : 'text-slate-900'
                } font-semibold whitespace-nowrap text-sm leading-tight md:text-[15px]`}
                style="overflow: visible;"
              >
                {brand.email}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-12 md:py-16 bg-gradient-to-b from-slate-950/70 via-slate-900/80 to-slate-950/90 text-white">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-[1.1fr_0.9fr] gap-10 items-start">
      <div class="space-y-4">
        <p class="uppercase tracking-[0.32em] text-xs text-amber-200/80">Signal & qualification</p>
        <h2 class="text-3xl md:text-4xl font-semibold leading-tight">Choisissez le sc√©nario qui vous correspond</h2>
        <p class="text-lg text-white/85 max-w-2xl">
          Chaque option d√©clenche des questions adapt√©es : urgences, objets lourds, acc√®s sensibles ou simple nettoyage. Vous gagnez
          du temps et nous filtrons les risques avant de confirmer un cr√©neau.
        </p>
        <div class="rounded-2xl border border-white/10 bg-white/5 backdrop-blur-md p-4 text-sm space-y-2">
          <p class="font-semibold text-white/90">Ce que nous qualifions automatiquement</p>
          <ul class="list-disc pl-5 space-y-1 text-white/80">
            <li>Intentions diff√©rentes = routing diff√©rent (urgence, lourd, acc√®s complexe, nettoyage).</li>
            <li>Questions de disqualification discr√®tes : objet &gt; 120kg, r√©servations ascenseur/parking, voisins inform√©s.</li>
            <li>Score de risque mis √† jour en temps r√©el pour prioriser l‚Äôappel ou la validation manuelle.</li>
          </ul>
        </div>
      </div>
      <div class="grid sm:grid-cols-2 gap-4">
        {leadIntentOptions.map((option) => (
          <button
            type="button"
            class="group text-left rounded-2xl border border-white/10 bg-white/10 hover:border-amber-300/70 hover:bg-amber-50/10 transition shadow-lg p-4 flex flex-col gap-2"
            data-intent-choice={option.value}
          >
            <div class="flex items-center justify-between gap-3">
              <p class="text-sm uppercase tracking-[0.2em] text-amber-200/70">Intent</p>
              <span class="px-2 py-1 text-[11px] rounded-full bg-white/10 border border-white/20">S√©lection rapide</span>
            </div>
            <div>
              <p class="text-lg font-semibold text-white">{option.label}</p>
              <p class="text-sm text-white/80 leading-relaxed">{option.description}</p>
            </div>
            <span class="text-xs text-amber-200/80 flex items-center gap-2 group-hover:text-amber-100">
              <span class="h-1 w-1 rounded-full bg-amber-300"></span>
              Pr√©-s√©lectionne le formulaire
            </span>
          </button>
        ))}
      </div>
    </div>
  </section>

  <section
    class="relative py-14 md:py-18 bg-cover bg-center"
    style={`background-image:${view.hero.background}; background-size: cover; background-position: center;`}
  >
    <div class={`absolute inset-0 ${isTransport ? 'opacity-95' : 'opacity-92'} bg-gradient-to-br ${view.formAccent} mix-blend-multiply saturate-160 contrast-110 brightness-105`}></div>
    <div class="absolute inset-0 pointer-events-none" style="background: radial-gradient(80% 80% at 20% 25%, rgba(255,255,255,0.3), transparent), radial-gradient(70% 70% at 80% 20%, rgba(255,255,255,0.25), transparent); mix-blend-screen;"></div>
    <div class="absolute inset-0 bg-white/12 backdrop-blur-[0.5px]"></div>
    <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="relative">
        <div class="absolute -inset-4 blur-3xl opacity-60 bg-white/60 dark:bg-slate-900/40"></div>
        <div
          class={`relative rounded-3xl shadow-2xl border border-slate-200/80 dark:border-slate-800/70 ${
            isTransport ? 'bg-white/10 dark:bg-slate-900/90 backdrop-blur-md' : 'bg-white/10 dark:bg-slate-900/90 backdrop-blur-md'
          }`}
        >
            <ContactUs
            id="form"
            title={formTitle}
            subtitle={formSubtitle}
            classes={{ container: 'px-4 md:px-6 py-8 md:py-10' }}
            geoapifyKey={import.meta.env.PUBLIC_GEOAPIFY_KEY ?? ''}

            inputs={[
              { type: 'section', name: 'section_need', label: 'üéØ Votre besoin' },
              {
                type: 'radio',
                name: 'lead_intent',
                label: 'Ce qui vous correspond le mieux',
                required: true,
                options: leadIntentOptions.map((option) => ({ value: option.value, label: option.label })),
              },
              {
                type: 'radio',
                name: 'time_pressure',
                label: 'D√©lai et souplesse',
                required: true,
                options: [
                  { value: 'urgent_today', label: 'Aujourd‚Äôhui / demain' },
                  { value: 'this_week', label: 'Cette semaine' },
                  { value: 'flexible', label: 'Flexible si cr√©neau optimis√©' },
                ],
              },

              { type: 'section', name: 'section_info', label: 'üìç Informations essentielles' },
              {
                type: 'radio',
                name: 'date_flexible',
                label: 'Date flexible ?',
                required: true,
                options: [
                  { value: 'no', label: 'Non, date pr√©cise' },
                  { value: 'yes', label: 'Oui, plage possible' },
                ],
              },
              {
                type: 'date',
                name: 'move_date',
                label: 'Date souhait√©e',
                required: true,
                helper: 'Date cible (flexibilit√© = meilleur planning)',
                conditional: { source: 'date_flexible', showOn: ['no'], hideOn: ['yes'] },
              },
              {
                type: 'date',
                name: 'move_date_from',
                label: 'P√©riode souhait√©e ‚Äî d√©but',
                required: true,
                helper: 'Indiquez le premier jour possible',
                conditional: { source: 'date_flexible', showOn: ['yes'], hideOn: ['no'] },
              },
              {
                type: 'date',
                name: 'move_date_to',
                label: 'P√©riode souhait√©e ‚Äî fin',
                required: true,
                helper: 'Dernier jour possible',
                conditional: { source: 'date_flexible', showOn: ['yes'], hideOn: ['no'] },
              },
              {
                type: 'radio',
                name: 'time_preference',
                label: 'Pr√©f√©rence horaire',
                required: true,
                options: [
                  { value: 'morning', label: 'Matin' },
                  { value: 'afternoon', label: 'Apr√®s-midi' },
                  { value: 'flexible', label: 'Flexible' },
                ],
              },
              {
                type: 'radio',
                name: 'apartment_size',
                label: 'Taille du logement',
                required: true,
                options: [
                  { value: '1-2', label: 'Studio / 1‚Äì2 pi√®ces' },
                  { value: '2.5', label: '2.5 pi√®ces' },
                  { value: '3.5', label: '3.5 pi√®ces' },
                  { value: '4.5', label: '4.5 pi√®ces' },
                  { value: '5+', label: '5 pi√®ces ou plus' },
                ],
              },

              { type: 'section', name: 'section_depart', label: 'üè† Acc√®s & √©tages (d√©part)' },
              {
                type: 'text',
                name: 'from_street',
                label: 'Rue (d√©part)',
                placeholder: 'Rue X',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer la rue de d√©part.',
                colSpan: 1,
                attributes: { 'data-geoapify': 'from' },
              },
              {
                type: 'text',
                name: 'from_number',
                label: 'N¬∞',
                placeholder: '12',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer le num√©ro.',
                colSpan: 1,
                className: '',
              },
              {
                type: 'text',
                name: 'from_postcode',
                label: 'Code postal',
                placeholder: '1000',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer le code postal.',
              },
              {
                type: 'text',
                name: 'from_city',
                label: 'Ville',
                placeholder: 'Lausanne',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer la ville.',
                colSpan: 1,
              },
              {
                type: 'radio',
                name: 'origin_floor',
                label: '√âtage de d√©part',
                required: true,
                options: [
                  { value: '0', label: 'Rez-de-chauss√©e' },
                  { value: '1', label: '1er √©tage' },
                  { value: '2', label: '2e √©tage' },
                  { value: '3', label: '3e √©tage' },
                  { value: '4+', label: '4e √©tage ou plus' },
                ],
              },
              {
                type: 'radio',
                name: 'origin_elevator',
                label: 'Ascenseur utilisable ?',
                required: true,
                options: [
                  { value: 'yes', label: 'Oui' },
                  { value: 'no', label: 'Non' },
                  { value: 'unknown', label: 'Je ne sais pas' },
                ],
              },
              {
                type: 'radio',
                name: 'origin_parking',
                label: 'Distance de stationnement',
                required: true,
                options: [
                  { value: '<10m', label: '< 10 m√®tres' },
                  { value: '10-30m', label: '10 √† 30 m√®tres' },
                  { value: '>30m', label: '> 30 m√®tres' },
                  { value: 'unknown', label: 'Je ne sais pas' },
                ],
              },

              { type: 'section', name: 'section_arrivee', label: 'üèÅ Acc√®s & √©tages (arriv√©e)' },
              {
                type: 'text',
                name: 'to_street',
                label: 'Rue (arriv√©e)',
                placeholder: 'Rue Y',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer la rue d‚Äôarriv√©e.',
                colSpan: 1,
                attributes: { 'data-geoapify': 'to' },
              },
              {
                type: 'text',
                name: 'to_number',
                label: 'N¬∞',
                placeholder: '34',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer le num√©ro.',
                colSpan: 1,
                className: '',
              },
              {
                type: 'text',
                name: 'to_postcode',
                label: 'Code postal',
                placeholder: '1200',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer le code postal.',
              },
              {
                type: 'text',
                name: 'to_city',
                label: 'Ville',
                placeholder: 'Gen√®ve',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer la ville.',
                colSpan: 1,
              },
              {
                type: 'radio',
                name: 'dest_floor',
                label: '√âtage d‚Äôarriv√©e',
                required: true,
                options: [
                  { value: '0', label: 'Rez-de-chauss√©e' },
                  { value: '1', label: '1er √©tage' },
                  { value: '2', label: '2e √©tage' },
                  { value: '3', label: '3e √©tage' },
                  { value: '4+', label: '4e √©tage ou plus' },
                ],
              },
              {
                type: 'radio',
                name: 'dest_elevator',
                label: 'Ascenseur utilisable ?',
                required: true,
                options: [
                  { value: 'yes', label: 'Oui' },
                  { value: 'no', label: 'Non' },
                  { value: 'unknown', label: 'Je ne sais pas' },
                ],
              },

              {
                type: 'radio',
                name: 'stairs_type',
                label: 'Type d‚Äôescaliers',
                required: true,
                options: [
                  { value: 'standard', label: 'Standards' },
                  { value: 'narrow', label: '√âtroits / tournants / colima√ßon' },
                ],
              },
              {
                type: 'radio',
                name: 'parking_authorization',
                label: 'Autorisation de stationnement n√©cessaire ?',
                required: true,
                helper: 'Dans certaines communes, une autorisation doit √™tre demand√©e 5‚Äì7 jours avant.',
                options: [
                  { value: 'no', label: 'Non / stationnement libre' },
                  { value: 'yes', label: 'Oui (zone bleue / centre-ville)' },
                  { value: 'unknown', label: 'Je ne sais pas' },
                ],
              },

              { type: 'section', name: 'section_volume', label: 'üì¶ Volume & friction r√©elle' },
              {
                type: 'radio',
                name: 'confidence_level',
                label: '√ätes-vous s√ªr(e) que ces informations refl√®tent bien la r√©alit√© ?',
                required: true,
                options: [
                  { value: 'sure', label: 'Oui, assez s√ªr' },
                  { value: 'unsure', label: 'Pas vraiment / difficile √† √©valuer' },
                ],
              },
              {
                type: 'radio',
                name: 'packed_ready',
                label: 'Tout sera emball√© en cartons le jour J ?',
                required: true,
                options: [
                  { value: 'yes', label: 'Oui' },
                  { value: 'mostly', label: 'Presque' },
                  { value: 'no', label: 'Non' },
                ],
              },
              {
                type: 'checkbox',
                name: 'extra_spaces',
                label: 'Espaces ou objets particuliers',
                options: [
                  { value: 'cellar', label: 'Cave' },
                  { value: 'attic', label: 'Grenier' },
                  { value: 'garage', label: 'Garage' },
                  { value: 'piano', label: 'Piano' },
                  { value: 'stone', label: 'Meuble lourd (pierre / marbre)' },
                ],
              },
              {
                type: 'checkbox',
                name: 'bulky_items',
                label: 'Objets difficiles √† man≈ìuvrer',
                options: [
                  { value: 'bulky', label: 'Canap√© d‚Äôangle, armoire large, table monobloc‚Ä¶' },
                ],
              },
              {
                type: 'radio',
                name: 'fragile_items',
                label: 'Objets fragiles ou de valeur ?',
                required: true,
                options: [
                  { value: 'no', label: 'Non' },
                  { value: 'yes', label: 'Oui (verre, √©crans, ≈ìuvres, aquariums‚Ä¶)' },
                ],
              },
              {
                type: 'radio',
                name: 'dismantling',
                label: 'Meubles √† d√©monter / remonter ?',
                required: true,
                options: [
                  { value: 'none', label: 'Aucun' },
                  { value: 'some', label: 'Quelques-uns' },
                  { value: 'many', label: 'Plusieurs' },
                ],
              },
              {
                type: 'radio',
                name: 'heavy_object',
                label: 'Objet > 120kg ou encombrant ?',
                required: true,
                options: [
                  { value: 'no', label: 'Non' },
                  { value: 'yes', label: 'Oui (piano √† queue, coffre-fort, pierre‚Ä¶)' },
                ],
              },

              { type: 'section', name: 'section_org', label: 'üë• Organisation & contr√¥le' },
              {
                type: 'radio',
                name: 'people_pickup',
                label: 'Personnes pr√©sentes au d√©part',
                required: true,
                options: [
                  { value: 'client_only', label: 'Client uniquement' },
                  { value: 'family', label: 'Famille / proches' },
                ],
              },
              {
                type: 'radio',
                name: 'client_helping',
                label: 'Quelqu‚Äôun aidera au portage ?',
                required: true,
                helper: 'Pour des raisons d‚Äôassurance, seul notre personnel effectue le portage.',
                options: [
                  { value: 'no', label: 'Non' },
                  { value: 'yes', label: 'Oui' },
                ],
              },
              {
                type: 'radio',
                name: 'access_reserved',
                label: 'Ascenseur / parking d√©j√† r√©serv√©s ?',
                required: true,
                helper: 'R√©servation recommand√©e pour √©viter les blocages le jour J.',
                options: [
                  { value: 'yes', label: 'Oui' },
                  { value: 'no', label: 'Pas encore' },
                  { value: 'not_needed', label: 'Non n√©cessaire' },
                ],
              },
              {
                type: 'radio',
                name: 'neighbors_informed',
                label: 'Voisins / conciergerie inform√©s ?',
                required: true,
                options: [
                  { value: 'yes', label: 'Oui' },
                  { value: 'no', label: 'Pas encore' },
                  { value: 'not_needed', label: 'Non n√©cessaire' },
                ],
              },

              { type: 'section', name: 'section_contact', label: 'üìû Coordonn√©es & validation' },
              {
                type: 'text',
                name: 'client_name',
                label: 'Nom et pr√©nom',
                placeholder: 'Nom complet',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer un nom complet.',
              },
              {
                type: 'email',
                name: 'client_email',
                label: 'Email',
                placeholder: 'vous@example.ch',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer un email valide.',
              },
              {
                type: 'tel',
                name: 'client_phone',
                label: 'T√©l√©phone suisse',
                placeholder: '+41 79 123 45 67',
                required: true,
                requiredMessage: 'Merci d‚Äôindiquer un num√©ro suisse.',
              },
              {
                type: 'radio',
                name: 'contact_channel',
                label: 'Canal pr√©f√©r√© pour la confirmation',
                required: true,
                options: [
                  { value: 'phone', label: 'Appel' },
                  { value: 'whatsapp', label: 'WhatsApp' },
                  { value: 'email', label: 'Email' },
                ],
              },
            ]}
            textarea={{
              label: 'Y a-t-il des contraintes particuli√®res que nous devrions conna√Ætre ?',
              name: 'surprises',
              rows: 3,
            }}
            disclaimer={{
              label: 'Je confirme que ces informations sont exactes et compl√®tes.',
            }}
            button="V√©rifier planning & acc√®s"
            description="Aucun engagement ‚Äî devis gratuit sous 24h. Nous confirmons sous 1 jour ouvr√©."
          />
        </div>
      </div>
    </div>
  </section>

  <section class="py-14 md:py-18 bg-gradient-to-b from-white to-slate-50">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 grid lg:grid-cols-[1.2fr_0.8fr] gap-10 items-start">
      <div class="space-y-6">
        <div class="space-y-2">
          <p class="text-xs uppercase tracking-[0.32em] text-slate-500">Ancrage prix & filtres</p>
          <h2 class="text-3xl font-semibold leading-tight text-slate-900">Rep√®res tarifaires non engageants</h2>
          <p class="text-slate-600 max-w-3xl">
            Ranges indicatifs pour cadrer les attentes. Les √©carts viennent des acc√®s, du volume r√©el et du niveau de protection.
            Les urgences ajoutent g√©n√©ralement 30‚Äì70% selon le timing.
          </p>
        </div>
        <div class="grid sm:grid-cols-2 gap-4">
          {priceAnchors.map((anchor) => (
            <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-5">
              <p class="text-sm uppercase tracking-[0.2em] text-slate-500">{anchor.title}</p>
              <p class="text-2xl font-semibold text-slate-900 mt-2">{anchor.range}</p>
              <ul class="mt-3 space-y-1 text-sm text-slate-600 list-disc list-inside">
                {anchor.drivers.map((driver) => (
                  <li>{driver}</li>
                ))}
              </ul>
            </div>
          ))}
        </div>
        <div class="rounded-2xl border border-amber-200/80 bg-amber-50 p-4 text-sm text-amber-900 shadow-sm">
          <p class="font-semibold">Pourquoi nous ne sommes pas les moins chers</p>
          <ul class="list-disc pl-5 space-y-1 mt-1">
            <li>Protections syst√©matiques (sols, murs, mobilier) et arrimage renforc√©.</li>
            <li>Coordination parkings/ascenseur, r√©servations et notifications voisins si besoin.</li>
            <li>Chef d‚Äô√©quipe identifi√© et suivi direct en cas d‚Äôimpr√©vu.</li>
          </ul>
        </div>
      </div>
      <div class="space-y-5">
        <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-5">
          <p class="text-xs uppercase tracking-[0.32em] text-slate-500">Process & plan B</p>
          <h3 class="text-xl font-semibold text-slate-900 mt-1">√âtats visibles c√¥t√© client</h3>
          <ul class="mt-3 space-y-2 text-sm text-slate-600 list-disc list-inside">
            {processStates.map((state) => (
              <li>{state}</li>
            ))}
          </ul>
        </div>
        <div class="rounded-2xl border border-slate-200 bg-white shadow-sm p-5">
          <p class="text-xs uppercase tracking-[0.32em] text-slate-500">Preuves concr√®tes</p>
          <h3 class="text-xl font-semibold text-slate-900 mt-1">Ce que nous montrons</h3>
          <ul class="mt-3 space-y-2 text-sm text-slate-600 list-disc list-inside">
            {trustFacts.map((fact) => (
              <li>{fact}</li>
            ))}
          </ul>
          <p class="mt-3 text-sm text-slate-600">
            Photos d‚Äôhabillages de protection disponibles pour rassurer et cadrer les attentes sur place.
          </p>
        </div>
      </div>
    </div>
  </section>

  <Features2
    title={isUrgent ? 'Contact direct urgence' : 'Contact direct'}
    subtitle={isUrgent ? 'Canaux prioritaires' : 'Choisissez le canal qui vous convient le mieux.'}
    classes={isUrgent ? { items: { panel: 'card' }, container: 'urgent-grid' } : {}}
    items={
      isUrgent
        ? [
            { title: 'T√©l√©phone', description: '+41 76 798 27 93', icon: 'tabler:phone' },
            { title: 'Email', description: 'contact@lausannedemenagement.ch', icon: 'tabler:mail' },
            { title: 'WhatsApp', description: 'R√©ponse rapide sur cr√©neau urgent', icon: 'tabler:brand-whatsapp' },
            { title: 'Disponibilit√©', description: 'Cr√©neaux jour + soir/week-end selon charge', icon: 'tabler:calendar-time' },
          ]
        : [
            { title: 'WhatsApp', description: '+41 76 798 27 93', icon: 'tabler:phone' },
            { title: 'Email', description: 'pedro@pedrodemenagement.ch', icon: 'tabler:mail' },
            { title: 'Disponibilit√©', description: 'Du lundi au samedi, 8h00 ‚Äì 18h00', icon: 'tabler:calendar-time' },
          ]
    }
  />
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const intentButtons = document.querySelectorAll<HTMLButtonElement>('[data-intent-choice]');
    intentButtons.forEach((btn) => {
      btn.addEventListener('click', () => {
        const value = btn.dataset.intentChoice;
        if (!value) return;
        const target = document.querySelector<HTMLInputElement>(`input[name="lead_intent"][value="${value}"]`);
        if (target) {
          target.checked = true;
          target.dispatchEvent(new Event('change', { bubbles: true }));
          target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      });
    });
  });
</script>

  <style>
    :global(.contact-hero-light h1),
    :global(.contact-hero-light h2),
    :global(.contact-hero-light h3),
    :global(.contact-hero-light h4),
  :global(.contact-hero-light h5),
  :global(.contact-hero-light h6),
  :global(.contact-hero-light p),
  :global(.contact-hero-light .text-muted),
  :global(.contact-hero-light .tagline) {
    color: rgba(255, 255, 255, 0.92) !important;
  }
  :global(.contact-hero-light .rounded-xl.bg-white\\/5) {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.15);
  }
</style>

<style>
  :global(.brand-etatdeslieux.contact-hero-light h1),
  :global(.brand-etatdeslieux.contact-hero-light h2),
  :global(.brand-etatdeslieux.contact-hero-light h3),
  :global(.brand-etatdeslieux.contact-hero-light h4),
  :global(.brand-etatdeslieux.contact-hero-light h5),
  :global(.brand-etatdeslieux.contact-hero-light h6),
  :global(.brand-etatdeslieux.contact-hero-light p),
  :global(.brand-etatdeslieux.contact-hero-light .text-muted),
  :global(.brand-etatdeslieux.contact-hero-light .tagline) {
    color: #0f172a !important;
  }
  :global(.brand-etatdeslieux.contact-hero-light .rounded-xl.bg-white\/5) {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(148, 163, 184, 0.5);
  }

</style>
