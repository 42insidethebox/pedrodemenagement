---
import Layout from '~/layouts/PageLayout.astro';
import ContactUs from '~/components/widgets/Contact.astro';
import Features2 from '~/components/widgets/Features2.astro';
import { getBrandFromHost } from '~/lib/brand';
import { BRANDS } from '~/lib/brands.config';
import { getImage, getImageAlt } from '~/data/imageInventory';
import type { ImageId } from '~/data/imageInventory';

const host = Astro.request.headers.get('host');
const brandKey = getBrandFromHost(host);
const isUrgent = brandKey === 'urgent';
const brand = BRANDS[brandKey];
const brandType =
  isUrgent
    ? 'urgent'
    : brandKey === 'transport'
      ? 'transport'
      : brandKey === 'debarras'
        ? 'debarras'
        : brandKey === 'videmaison'
          ? 'videmaison'
          : brandKey === 'videsuccession'
            ? 'videsuccession'
            : brandKey === 'nettoyagesuccession' || brandKey === 'lausannenettoyage'
              ? 'clean'
              : brandKey === 'etatdeslieux'
                ? 'etatdeslieux'
                : 'move';
const img = (id: ImageId) => getImage(id);
const contactBgId =
  brandKey === 'urgent'
    ? 'inside_truck_unloading_couch'
    : brandKey === 'lausanne'
      ? 'men_loading_van_3'
      : brandKey === 'transport'
        ? 'professional_van_2'
        : brandKey === 'debarras'
          ? 'van_inside_objects_boxes_1'
          : brandKey === 'videmaison'
            ? 'strong_man_packing_1'
            : brandKey === 'videsuccession'
              ? 'empty_apartment_7'
              : brandKey === 'nettoyagesuccession' || brandKey === 'lausannenettoyage'
                ? 'man_cleaning'
                : brandKey === 'etatdeslieux'
                  ? 'empty_apartment_10'
                  : 'hero_happy_boxes_plants';
const contactAlt = getImageAlt(contactBgId);

const views = {
  move: {
    hero: {
      tagline: 'Contact déménagement',
      title: 'Un conseiller pour verrouiller vos accès et votre planning',
      subtitle: 'Réponse < 24h, chef d’équipe dédié, protections sol/murs et autorisations parking gérées.',
      background: `linear-gradient(135deg, rgba(15,23,42,0.72), rgba(30,64,175,0.62), rgba(12,18,36,0.7)), url('${img('hero_happy_boxes_plants')}')`,
      overlayClass: 'bg-gradient-to-br from-slate-900/45 via-blue-900/45 to-slate-800/55 backdrop-blur-[2px]',
      chips: ['Réponse < 24h', 'Chef d’équipe dédié', 'Accès et parkings validés'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous préparons',
      subtitle: 'Pour éviter les surprises le jour J.',
      items: [
        { title: 'Accès & parkings', description: 'Créneaux ascenseur, distance de portage, autorisations communales.' },
        { title: 'Protection du mobilier', description: 'Housses matelas, coins mousse, couvertures et arrimage.' },
        { title: 'Planning clair', description: 'Heure d’arrivée, matériel prévu, chef de bord identifié.' },
      ],
    },
    checkpoints: ['Visio ou photos possibles', 'Devis détaillé en CHF', 'Coordination WhatsApp si besoin'],
    accent: 'from-blue-500/25 via-slate-900/30 to-slate-900/45',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
  urgent: {
    hero: {
      tagline: 'Contact urgence',
      title: 'Appel immédiat, confirmation en 15 minutes',
      subtitle: 'Créneau du jour ou du lendemain selon disponibilité. Protections prêtes, livraison directe sans stockage.',
      background: `linear-gradient(135deg, rgba(185,28,28,0.85), rgba(239,68,68,0.72), rgba(249,115,22,0.62)), url('${img('men_loading_van_2')}')`,
      overlayClass: 'bg-gradient-to-br from-red-900/55 via-red-800/55 to-orange-600/50 backdrop-blur-[1px]',
      chips: ['Réponse < 5 min', 'Départ 60–90 min', 'Arc lémanique'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous verrouillons en urgence',
      subtitle: 'Coordination minute par minute.',
      items: [
        { title: 'Accès confirmés', description: 'Appel direct pour valider parkings et ascenseurs.' },
        { title: 'Camion prêt', description: 'Protections et arrimage renforcé déjà chargés.' },
        { title: 'Trajet direct', description: 'Pas de stockage, livraison immédiate au lieu d’arrivée.' },
      ],
    },
    checkpoints: ['Chef urgence dédié', 'WhatsApp en direct', 'Assurance incluse'],
    accent: 'from-red-600/30 via-red-800/35 to-orange-600/35',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
  transport: {
    hero: {
      tagline: 'Contact transport',
      title: 'Fenêtre horaire serrée et arrimage premium',
      subtitle: 'Mobilier design, électroménager, bureaux : conditionnement, calage et suivi chauffeur.',
      background: `linear-gradient(135deg, rgba(76,29,149,0.7), rgba(17,24,39,0.82), rgba(245,158,11,0.42)), url('${img('professional_van_2')}')`,
      overlayClass: 'bg-gradient-to-br from-purple-900/55 via-slate-900/60 to-amber-500/35 backdrop-blur-[2px]',
      chips: ['Fenêtre courte', 'Arrimage renforcé', 'Suivi direct chauffeur'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous préparons',
      subtitle: 'Pour vos pièces sensibles ou volumineuses.',
      items: [
        { title: 'Dimensions & fragilité', description: 'Brief rapide pour prévoir calage et protections.' },
        { title: 'Fenêtre horaire', description: 'Passage à l’heure convenue, chauffeur joignable.' },
        { title: 'Livraison précise', description: 'Placement, reprise des protections principales.' },
      ],
    },
    checkpoints: ['Coins mousse & filmage', 'Calage anti-glisse', 'Preuves photo sur demande'],
    accent: 'from-purple-500/25 via-slate-900/35 to-amber-400/25',
    formAccent: 'from-slate-950/40 via-slate-900/70 to-amber-500/10',
  },
  debarras: {
    hero: {
      tagline: 'Contact débarras',
      title: 'Débarras complet, trié et valorisé',
      subtitle: 'Appartements, caves, bureaux : tri, dons/recyclage et remise propre sans coordonner plusieurs équipes.',
      background: `linear-gradient(135deg, rgba(6,95,70,0.78), rgba(16,185,129,0.62), rgba(15,23,42,0.6)), url('${img('men_moving_heavy_couch_block')}')`,
      overlayClass: 'bg-gradient-to-br from-emerald-900/55 via-emerald-800/55 to-slate-900/55',
      chips: ['Tri & dons', 'Protection des communs', 'Rapport photo'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous cadrons',
      subtitle: 'Pour vider vite et propre.',
      items: [
        { title: 'Volume & accès', description: 'Photos ou visite express pour estimer portage.' },
        { title: 'Tri sur place', description: 'Réemploi en priorité, recyclage, évacuation contrôlée.' },
        { title: 'Remise propre', description: 'Balayage ou ménage optionnel, photos avant/après.' },
      ],
    },
    checkpoints: ['Créneau sous quelques jours', 'Chef d’équipe unique', 'Centres agréés'],
    accent: 'from-emerald-500/25 via-emerald-800/30 to-slate-900/40',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
  videmaison: {
    hero: {
      tagline: 'Contact vide maison',
      title: 'Vide maison complet et ordonné',
      subtitle: 'Tri, dons, recyclage et évacuation en une seule équipe. Rapport photo et remise propre.',
      background: `linear-gradient(135deg, rgba(249,115,22,0.62), rgba(180,83,9,0.7), rgba(124,45,18,0.55)), url('${img('strong_man_packing_1')}')`,
      overlayClass: 'bg-gradient-to-br from-amber-900/55 via-orange-700/55 to-amber-500/50',
      chips: ['Orientation dons', 'Respect des lieux', 'Remise propre'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous verrouillons',
      subtitle: 'Pour rendre le bien prêt à louer/vendre.',
      items: [
        { title: 'Accès & voisinage', description: 'Notification voisins si besoin, protections sols/murs.' },
        { title: 'Tri & évacuation', description: 'Dons, recyclage, puis évacuation contrôlée.' },
        { title: 'Photos finales', description: 'Avant/après pour bailleurs ou famille.' },
      ],
    },
    checkpoints: ['Créneau rapide', 'Chef unique', 'Option ménage finale'],
    accent: 'from-amber-500/25 via-orange-700/30 to-amber-900/35',
    formAccent: 'from-white/90 via-amber-50/90 to-white/90',
  },
  videsuccession: {
    hero: {
      tagline: 'Contact vide succession',
      title: 'Gestion discrète des biens successoraux',
      subtitle: 'Tri, inventaire succinct, évacuation et remise propre. Coordination héritiers et notaires.',
      background: `linear-gradient(135deg, rgba(15,17,27,0.9), rgba(217,119,6,0.52), rgba(0,0,0,0.72)), url('${img('empty_apartment_7')}')`,
      overlayClass: 'bg-gradient-to-br from-gray-950/65 via-gray-900/60 to-amber-600/45',
      chips: ['Discrétion', 'Inventaire succinct', 'Reporting photo'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous cadrons',
      subtitle: 'Pour éviter les frictions entre parties prenantes.',
      items: [
        { title: 'Consignes héritiers/notaire', description: 'Objets à conserver, à mettre de côté, à évacuer.' },
        { title: 'Tri & démontage', description: 'Séparation, démontage, acheminement centre agréé.' },
        { title: 'Remise propre', description: 'Nettoyage léger ou complet, photos finales.' },
      ],
    },
    checkpoints: ['Contact unique', 'Rapport clair', 'Créneau rapide'],
    accent: 'from-amber-500/20 via-amber-700/30 to-slate-900/45',
    formAccent: 'from-gray-950/50 via-gray-900/70 to-amber-600/20',
  },
  clean: {
    hero: {
      tagline: 'Contact nettoyage',
      title: 'Propreté maîtrisée, délais rapides',
      subtitle: 'Checklist pro, produits adaptés et contrôle qualité systématique pour appartements, bureaux ou fin de chantier.',
      background: `linear-gradient(135deg, rgba(34,211,238,0.52), rgba(14,165,233,0.55), rgba(15,23,42,0.7)), url('${img('man_cleaning')}')`,
      overlayClass: 'bg-gradient-to-br from-cyan-200/35 via-cyan-500/40 to-slate-900/60 backdrop-blur-[2px]',
      chips: ['Checklist bailleur', 'Matériel pro', 'Photos sur demande'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous préparons',
      subtitle: 'Pour une remise sans remarques.',
      items: [
        { title: 'Zones critiques', description: 'Cuisine, sdb, vitres et sols priorisés.' },
        { title: 'Matériel adapté', description: 'Monobrosse/aspirateurs HEPA si nécessaire.' },
        { title: 'Photos', description: 'Avant/après ou contrôle qualité selon besoin.' },
      ],
    },
    checkpoints: ['Créneau rapide', 'Option désinfection', 'Facture détaillée'],
    accent: 'from-cyan-300/25 via-cyan-500/25 to-slate-900/45',
    formAccent: 'from-white/92 via-white/96 to-white/92',
  },
  etatdeslieux: {
    hero: {
      tagline: 'Contact état des lieux',
      title: 'Constats précis, rapports photo, délais serrés',
      subtitle: 'Entrée ou sortie : check-list bail, photos horodatées et rapport envoyé rapidement.',
      background: `linear-gradient(135deg, rgba(14,165,233,0.65), rgba(15,23,42,0.8), rgba(7,10,20,0.85)), url('${img('empty_apartment_11')}')`,
      overlayClass: 'bg-gradient-to-br from-sky-500/35 via-slate-900/65 to-slate-900/70',
      chips: ['Rapport < 24h', 'Check-list bailleur', 'Photos horodatées'],
      tone: 'dark',
    },
    info: {
      title: 'Ce que nous verrouillons',
      subtitle: 'Pour un constat solide et neutre.',
      items: [
        { title: 'Planification', description: 'Créneau confirmé, accès validés.' },
        { title: 'Relevés sur place', description: 'Photos, mesures, checklist complète.' },
        { title: 'Rapport & envoi', description: 'PDF + galerie photo, partage aux parties.' },
      ],
    },
    checkpoints: ['Coordination régie', 'Remarques actionnables', 'Options nettoyage/déBarras'],
    accent: 'from-sky-400/25 via-slate-900/40 to-slate-900/55',
    formAccent: 'from-slate-950/45 via-slate-900/70 to-sky-500/25',
  },
};

const view = views[brandType];
const metadata = isUrgent
  ? {
      title: 'Contact urgence',
      description: 'Intervention express, réponse en < 15 minutes pendant les horaires urgents.',
      ignoreTitleTemplate: true,
    }
  : {
      title: 'Contact',
    };
const toneStrong = view.hero.tone === 'dark' ? 'text-white' : 'text-slate-900';
const toneMuted = view.hero.tone === 'dark' ? 'text-white/85' : 'text-slate-600';
const formTitle =
  isUrgent ? 'Obtenir un devis express' : brandKey === 'transport' ? 'Obtenir un devis transport' : 'Obtenir un devis précis';
const formSubtitle =
  isUrgent
    ? 'Formulaire prioritaire pour planifier une intervention immédiate.'
    : brandKey === 'transport'
      ? 'Expliquez le volume et les adresses : créneau précis et protections adaptées.'
      : 'Formulaire complet pour un chiffrage clair dès le premier échange.';
---

<Layout metadata={metadata} brandKey={brandKey}>
<section
    class={`relative overflow-hidden brand-${brandKey} contact-hero-light`}
    style={`background-image:${view.hero.background}; background-size: cover; background-position: center;`}
    aria-label={contactAlt}
  >
    <div class={`absolute inset-0 ${view.hero.overlayClass?.replace(/0\\.\\d+/g, (m) => (Number(m) * 0.7).toFixed(2)) || ''}`}></div>
      <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-14 md:py-18 grid gap-10 md:grid-cols-[1.15fr_0.85fr] items-start">
        <div class="space-y-6">
          <p class={`text-sm uppercase tracking-[0.32em] ${toneMuted}`}>{view.hero.tagline}</p>
          <h1 class={`text-4xl md:text-5xl font-semibold leading-tight ${toneStrong}`}>{view.hero.title}</h1>
          <p class={`text-lg md:text-xl max-w-3xl ${toneMuted}`}>{view.hero.subtitle}</p>
        <div class="flex flex-wrap gap-3">
          {view.hero.chips.map((chip) => (
            <span class="rounded-full px-4 py-2 text-sm font-semibold bg-white/15 border border-white/20 text-white backdrop-blur">
              {chip}
            </span>
          ))}
        </div>
        <div class="grid sm:grid-cols-3 gap-3 text-sm">
          {view.checkpoints.map((item) => (
            <div class="rounded-xl bg-white/10 border border-white/20 text-white/90 px-4 py-3 shadow-lg backdrop-blur">
              {item}
            </div>
          ))}
        </div>
      </div>
      <div class="relative">
        <div class={`absolute -inset-6 blur-3xl opacity-70 bg-gradient-to-br ${view.accent}`}></div>
        <div class="relative rounded-3xl border border-white/20 bg-white/10 backdrop-blur-lg shadow-2xl p-8 space-y-4 text-white">
          <p class="text-xs uppercase tracking-[0.3em] text-white/70">Ce qui change selon vous</p>
          <h3 class="text-2xl font-semibold leading-tight">{view.info.title}</h3>
          <p class="text-white/85">{view.info.subtitle}</p>
          <div class="space-y-3">
            {view.info.items.map((item) => (
              <div class="flex gap-3">
                <div class="mt-1 h-2 w-2 rounded-full bg-white/70"></div>
                <div>
                  <p class="font-semibold text-white">{item.title}</p>
                  <p class="text-white/80 text-sm leading-relaxed">{item.description}</p>
                </div>
              </div>
            ))}
          </div>
          <div class="grid grid-cols-2 gap-3 pt-2 text-sm text-white/80">
            <div class="rounded-lg border border-white/20 px-3 py-2 bg-white/5">Téléphone<br /><span class="text-white font-semibold break-words">{brand.phone}</span></div>
            <div class="rounded-lg border border-white/20 px-3 py-2 bg-white/5">Email<br /><span class="text-white font-semibold break-words">{brand.email}</span></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="relative py-14 md:py-18 bg-gradient-to-b from-white/90 via-white/95 to-white dark:from-slate-950/60 dark:via-slate-950/65 dark:to-slate-950/60">
    <div class={`absolute inset-0 opacity-80 bg-gradient-to-br ${view.formAccent}`}></div>
    <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 grid gap-10 lg:gap-12 md:grid-cols-[0.95fr_1.05fr] items-start">
      <div class="rounded-3xl border border-slate-200/70 dark:border-slate-800/70 bg-white/80 dark:bg-slate-900/80 shadow-xl p-8 md:p-10 space-y-5">
        <p class="text-sm uppercase tracking-[0.28em] text-slate-500 dark:text-slate-300">Comment on prépare</p>
        <h3 class="text-2xl md:text-3xl font-semibold text-slate-900 dark:text-white">{view.info.title}</h3>
        <p class="text-slate-600 dark:text-slate-300">{view.info.subtitle}</p>
        <div class="space-y-4">
          {view.info.items.map((item) => (
            <div class="p-4 rounded-2xl border border-slate-200/80 dark:border-slate-800/80 bg-slate-50/80 dark:bg-white/5 shadow-sm">
              <p class="text-base font-semibold text-slate-900 dark:text-white">{item.title}</p>
              <p class="text-slate-600 dark:text-slate-300 text-sm mt-1">{item.description}</p>
            </div>
          ))}
        </div>
        <div class="grid sm:grid-cols-3 gap-3 pt-4">
          {view.checkpoints.map((item) => (
            <div class="rounded-xl bg-white shadow border border-slate-200/80 px-4 py-3 text-sm font-semibold text-slate-900 dark:text-white dark:bg-slate-900/80 dark:border-slate-700/70">
              {item}
            </div>
          ))}
        </div>
      </div>
      <div class="relative">
        <div class="absolute -inset-4 blur-3xl opacity-60 bg-white/60 dark:bg-slate-900/40"></div>
        <div class="relative rounded-3xl shadow-2xl border border-slate-200/80 dark:border-slate-800/70 bg-white/95 dark:bg-slate-900/90">
          <ContactUs
            id="form"
            title={formTitle}
            subtitle={formSubtitle}
            classes={{ container: 'px-4 md:px-6 py-8 md:py-10' }}
    inputs={[
      { type: 'section', name: 'section_essentiel', label: '1. Infos essentielles' },
      { type: 'text', name: 'name', label: 'Nom et prénom', required: true, requiredMessage: 'Nous avons besoin de votre nom pour vous contacter.' },
      { type: 'tel', name: 'phone', label: 'Téléphone', required: true, requiredMessage: 'Un numéro permet de confirmer les accès et l’horaire.' },
      { type: 'email', name: 'email', label: 'Email', required: true, requiredMessage: 'Email pour envoyer votre devis.' },

      { type: 'section', name: 'section_depart', label: '2. Adresse de départ' },
      { type: 'text', name: 'from', label: 'Adresse de départ (rue + n°)', required: true, requiredMessage: 'Adresse nécessaire pour estimer accès et distance.' },
      { type: 'text', name: 'from_zip', label: 'Code postal (départ)', required: true },
      { type: 'text', name: 'from_city', label: 'Ville (départ)', required: true },
      { type: 'date', name: 'date', label: 'Date souhaitée', required: true },
      {
        type: 'select',
        name: 'flexibility',
        label: 'Flexibilité',
        required: true,
        options: [
          { label: 'Fixe', value: 'fixed' },
          { label: '± 1 jour', value: '1day' },
          { label: '± 3 jours', value: '3day' },
          { label: 'Flexible', value: 'flex' },
        ],
      },
      {
        type: 'select',
        name: 'time_window',
        label: 'Flexibilité horaire le jour J',
        options: [
          { label: 'Arrivée fixe', value: 'fixed' },
          { label: 'Créneau matin', value: 'morning' },
          { label: 'Créneau après-midi', value: 'afternoon' },
          { label: 'Flexible', value: 'flex' },
        ],
      },
      {
        type: 'select',
        name: 'parking_from',
        label: 'Parking camion (départ)',
        required: true,
        helper: 'Permet de prévoir le temps de portage.',
        options: [
          { label: 'Facile devant', value: 'easy' },
          { label: 'Moyen (rue/parking)', value: 'medium' },
          { label: 'Difficile (rue étroite/loin)', value: 'hard' },
        ],
      },
      {
        type: 'select',
        name: 'parking_legality',
        label: 'Stationnement autorisé devant l’immeuble ?',
        options: [
          { label: 'Oui', value: 'yes' },
          { label: 'Non / incertain', value: 'no' },
        ],
      },
      {
        type: 'select',
        name: 'permit',
        label: 'Besoin de permis communal pour le camion ?',
        options: [
          { label: 'Non', value: 'no' },
          { label: 'Oui', value: 'yes' },
        ],
      },
      {
        type: 'select',
        name: 'access_from',
        label: 'Ascenseur / étage (départ)',
        required: true,
        helper: 'Pour prévoir temps et protections.',
        options: [
          { label: 'Ascenseur grand', value: 'big' },
          { label: 'Ascenseur petit', value: 'small' },
          { label: 'Pas d’ascenseur', value: 'none' },
        ],
      },
      {
        type: 'text',
        name: 'elevator_dimensions',
        label: 'Dimensions ascenseur (si petit)',
        placeholder: 'Ex: 195 cm x 80 cm',
        helper: 'Pour savoir si un canapé/armoire passe.',
        conditional: { source: 'access_from', showOn: ['small'] },
      },
      { type: 'number', name: 'floor_from', label: 'Étage (départ)', placeholder: 'Ex: 3', required: true },
      {
        type: 'select',
        name: 'walk_from',
        label: 'Distance à pied (départ)',
        required: true,
        helper: 'Portage extérieur jusqu’au camion.',
        options: [
          { label: '0–10 m', value: '0-10' },
          { label: '10–40 m', value: '10-40' },
          { label: '40 m +', value: '40+' },
        ],
      },
      {
        type: 'select',
        name: 'stairs_from',
        label: 'Escaliers (départ)',
        required: true,
        helper: 'Étroit/tournant augmente le temps.',
        options: [
          { label: 'Escaliers larges', value: 'wide' },
          { label: 'Étroit / tournant', value: 'tight' },
          { label: 'Colimaçon', value: 'spiral' },
        ],
      },
      {
        type: 'select',
        name: 'hall_from',
        label: 'Distance dans le bâtiment (départ)',
        required: true,
        helper: 'Couloirs / halls intérieurs.',
        options: [
          { label: '0–10 m', value: '0-10' },
          { label: '10–30 m', value: '10-30' },
          { label: '30 m +', value: '30+' },
        ],
      },
      {
        type: 'text',
        name: 'area_events_from',
        label: 'Rue fermée / marché / travaux (départ) ?',
        placeholder: 'Ex: Marché samedi, rue fermée',
      },
      {
        type: 'select',
        name: 'access_person_from',
        label: 'Quelqu’un sur place (départ) ?',
        options: [
          { label: 'Oui', value: 'yes' },
          { label: 'Non – code / clé / concierge', value: 'no' },
        ],
      },

      { type: 'section', name: 'section_arrivee', label: '3. Adresse d’arrivée' },
      { type: 'text', name: 'to', label: 'Adresse d’arrivée (rue + n°)', required: true, requiredMessage: 'Adresse nécessaire pour estimer accès et distance.' },
      { type: 'text', name: 'to_zip', label: 'Code postal (arrivée)', required: true },
      { type: 'text', name: 'to_city', label: 'Ville (arrivée)', required: true },
      {
        type: 'select',
        name: 'parking_to',
        label: 'Parking camion (arrivée)',
        required: true,
        helper: 'Permet de prévoir le temps de portage.',
        options: [
          { label: 'Facile devant', value: 'easy' },
          { label: 'Moyen (rue/parking)', value: 'medium' },
          { label: 'Difficile (rue étroite/loin)', value: 'hard' },
        ],
      },
      {
        type: 'select',
        name: 'access_to',
        label: 'Ascenseur / étage (arrivée)',
        required: true,
        options: [
          { label: 'Ascenseur grand', value: 'big' },
          { label: 'Ascenseur petit', value: 'small' },
          { label: 'Pas d’ascenseur', value: 'none' },
        ],
      },
      {
        type: 'text',
        name: 'elevator_dimensions_to',
        label: 'Dimensions ascenseur (arrivée, si petit)',
        placeholder: 'Ex: 200 cm x 85 cm',
        helper: 'Pour savoir si un canapé/armoire passe.',
        conditional: { source: 'access_to', showOn: ['small'] },
      },
      { type: 'number', name: 'floor_to', label: 'Étage (arrivée)', placeholder: 'Ex: 2', required: true },
      {
        type: 'select',
        name: 'walk_to',
        label: 'Distance à pied (arrivée)',
        required: true,
        options: [
          { label: '0–10 m', value: '0-10' },
          { label: '10–40 m', value: '10-40' },
          { label: '40 m +', value: '40+' },
        ],
      },
      {
        type: 'select',
        name: 'stairs_to',
        label: 'Escaliers (arrivée)',
        required: true,
        options: [
          { label: 'Escaliers larges', value: 'wide' },
          { label: 'Étroit / tournant', value: 'tight' },
          { label: 'Colimaçon', value: 'spiral' },
        ],
      },
      {
        type: 'select',
        name: 'hall_to',
        label: 'Distance dans le bâtiment (arrivée)',
        required: true,
        options: [
          { label: '0–10 m', value: '0-10' },
          { label: '10–30 m', value: '10-30' },
          { label: '30 m +', value: '30+' },
        ],
      },
      {
        type: 'text',
        name: 'area_events_to',
        label: 'Rue fermée / marché / travaux (arrivée) ?',
        placeholder: 'Ex: Marché samedi, rue fermée',
      },
      {
        type: 'select',
        name: 'access_person',
        label: 'Quelqu’un sur place (arrivée) ?',
        options: [
          { label: 'Oui', value: 'yes' },
          { label: 'Non – code / clé / concierge', value: 'no' },
        ],
      },

      { type: 'section', name: 'section_volume', label: '4. Volume principal' },
      {
        type: 'select',
        name: 'size',
        label: 'Taille du logement',
        required: true,
        options: [
          { label: 'Studio / 1 pièce', value: '1' },
          { label: '2–3 pièces', value: '2-3' },
          { label: '4–4.5 pièces', value: '4-4.5' },
          { label: '5 pièces et +', value: '5+' },
          { label: 'Bureau / commerce', value: 'business' },
        ],
      },
      { type: 'number', name: 'people', label: 'Personnes dans le foyer (approx.)', required: true },
      { type: 'number', name: 'boxes', label: 'Cartons / sacs (approx.)', required: true },
      { type: 'number', name: 'furniture_big', label: 'Grands meubles (canapé, lit, armoire, table...)', required: true },
      { type: 'number', name: 'sofa_two', label: 'Canapés 2 places', placeholder: 'Ex: 1' },
      { type: 'number', name: 'sofa_three', label: 'Canapés 3 places', placeholder: 'Ex: 1' },
      { type: 'number', name: 'sofa_corner', label: 'Canapés angle / 5 places', placeholder: 'Ex: 1' },
      { type: 'number', name: 'beds_double', label: 'Lits doubles', placeholder: 'Ex: 2' },
      { type: 'number', name: 'beds_single', label: 'Lits simples', placeholder: 'Ex: 1' },
      { type: 'number', name: 'wardrobes_large', label: 'Armoires / penderies (grandes)', placeholder: 'Ex: 2' },
      { type: 'number', name: 'tables_large', label: 'Tables > 6 personnes', placeholder: 'Ex: 1' },

      { type: 'section', name: 'section_secondaire', label: '5. Espaces secondaires' },
      {
        type: 'select',
        name: 'balcony',
        label: 'Terrasse / balcon',
        required: true,
        options: [
          { label: 'Non', value: 'no' },
          { label: 'Oui – peu d’objets', value: 'small' },
          { label: 'Oui – beaucoup d’objets / plantes', value: 'large' },
        ],
      },
      {
        type: 'select',
        name: 'cave',
        label: 'Cave / grenier',
        required: true,
        options: [
          { label: 'Aucun', value: 'none' },
          { label: '25% rempli', value: '25' },
          { label: '50% rempli', value: '50' },
          { label: '75% rempli', value: '75' },
          { label: '100% rempli', value: '100' },
        ],
      },
      {
        type: 'select',
        name: 'storage_needed',
        label: 'Besoin d’un stockage temporaire ?',
        options: [
          { label: 'Non', value: 'no' },
          { label: 'Oui – court terme', value: 'short' },
          { label: 'Oui – long terme', value: 'long' },
        ],
      },

      { type: 'section', name: 'section_objets', label: '6. Objets lourds & fragiles' },
      {
        type: 'checkbox',
        name: 'heavy',
        label: 'Objets lourds',
        required: true,
        helper: 'Sélectionnez "Aucun" si rien ne s’applique. Poids max 200 kg.',
        options: [
          { label: 'Aucun', value: 'none' },
          { label: 'Machine à laver / sèche-linge', value: 'laundry' },
          { label: 'Frigo / congélateur', value: 'fridge' },
          { label: 'Frigo américain', value: 'bigfridge' },
          { label: 'Aquarium / coffre-fort', value: 'safe' },
          { label: 'Piano', value: 'piano' },
        ],
      },
      {
        type: 'number',
        name: 'heavy_count',
        label: 'Nombre total d’objets lourds',
        placeholder: 'Ex: 2',
        conditional: { source: 'heavy[]', showIfAnyNot: ['none'] },
      },
      {
        type: 'checkbox',
        name: 'fragile',
        label: 'Objets fragiles',
        required: true,
        helper: 'Pour prévoir protections spécifiques.',
        options: [
          { label: 'Aucun', value: 'none' },
          { label: 'Table en verre / miroirs', value: 'glass' },
          { label: 'Œuvres d’art', value: 'art' },
          { label: 'TV > 65\"', value: 'tv' },
          { label: 'Plantes > 1m', value: 'plants' },
        ],
      },
      {
        type: 'text',
        name: 'bulky_dimensions',
        label: 'Dimensions objets très volumineux (si applicable)',
        placeholder: 'Ex: armoire PAX 240 x 100 x 60 cm',
        conditional: { source: 'heavy[]', showIfAnyNot: ['none'] },
      },
      {
        type: 'text',
        name: 'long_items',
        label: 'Objets longs (> 2 m)',
        placeholder: 'Ex: Matelas 180x200, table 220 cm, miroir 2 m',
        helper: 'Les objets longs compliquent les escaliers.',
      },
      {
        type: 'checkbox',
        name: 'high_value',
        label: 'Objets de valeur (> CHF 2’000)',
        options: [
          { label: 'Aucun', value: 'none' },
          { label: 'Tableaux / sculptures', value: 'art' },
          { label: 'High-tech premium', value: 'tech' },
          { label: 'Collections / vinyles', value: 'collection' },
        ],
      },
      {
        type: 'text',
        name: 'value_estimate',
        label: 'Valeur estimée / assurance souhaitée (si objet de valeur)',
        conditional: { source: 'high_value[]', showIfAnyNot: ['none'] },
      },
      {
        type: 'number',
        name: 'value_amount',
        label: 'Valeur totale estimée des objets de valeur (CHF)',
        placeholder: 'Ex: 5000',
        conditional: { source: 'high_value[]', showIfAnyNot: ['none'] },
      },

      { type: 'section', name: 'section_demontage', label: '7. Démontage & emballage' },
      {
        type: 'checkbox',
        name: 'dismantling',
        label: 'Démontage / remontage',
        required: true,
        options: [
          { label: 'Lits / armoires', value: 'beds-wardrobe' },
          { label: 'Tables / bureaux', value: 'tables-desks' },
          { label: 'Canapés', value: 'sofas' },
          { label: 'Autres', value: 'other' },
        ],
      },
      {
        type: 'number',
        name: 'dismantling_beds',
        label: 'Combien de lits / armoires ?',
        placeholder: 'Ex: 2',
        conditional: { source: 'dismantling[]', showOn: ['beds-wardrobe'] },
      },
      {
        type: 'number',
        name: 'dismantling_tables',
        label: 'Combien de tables / bureaux ?',
        placeholder: 'Ex: 1',
        conditional: { source: 'dismantling[]', showOn: ['tables-desks'] },
      },
      {
        type: 'number',
        name: 'dismantling_sofas',
        label: 'Combien de canapés ?',
        placeholder: 'Ex: 1',
        conditional: { source: 'dismantling[]', showOn: ['sofas'] },
      },
      {
        type: 'text',
        name: 'dismantling_other',
        label: 'Autres éléments à démonter (précisez)',
        placeholder: 'Quoi ?',
        conditional: { source: 'dismantling[]', showOn: ['other'] },
      },
      {
        type: 'select',
        name: 'packing',
        label: 'Emballage',
        options: [
          { label: 'Tout est emballé', value: 'ready' },
          { label: 'Partiel (aide nécessaire)', value: 'partial' },
          { label: 'Emballage complet requis', value: 'full' },
        ],
      },
      {
        type: 'checkbox',
        name: 'materials',
        label: 'Fourniture de matériel',
        options: [
          { label: 'Cartons', value: 'cartons' },
          { label: 'Protections / bulles', value: 'bubble' },
          { label: 'Housses canapé/lit', value: 'covers' },
        ],
      },

      { type: 'section', name: 'section_options', label: '8. Options & contraintes' },
      {
        type: 'select',
        name: 'outdoor_path',
        label: 'Chemin extérieur',
        required: true,
        options: [
          { label: 'Plat', value: 'flat' },
          { label: 'En pente', value: 'slope' },
          { label: 'Escaliers extérieurs', value: 'stairs' },
        ],
      },
      {
        type: 'select',
        name: 'truck_access',
        label: 'Accès camion',
        required: true,
        options: [
          { label: 'Accès normal', value: 'normal' },
          { label: 'Limité (hauteur/largeur)', value: 'limited' },
          { label: 'Pas d’accès camion', value: 'no-access' },
        ],
      },
      {
        type: 'select',
        name: 'extra_stop',
        label: 'Adresse supplémentaire',
        options: [
          { label: 'Non', value: 'none' },
          { label: 'Oui – une adresse', value: 'one' },
          { label: 'Oui – deux adresses', value: 'two' },
        ],
      },
      { type: 'text', name: 'photos', label: 'Lien photos (Drive / WhatsApp / upload)' },
      { type: 'text', name: 'time_constraints', label: 'Contraintes horaires (immeuble / syndic)', placeholder: 'Ex: Pas après 17h, ascenseur réservé' },
      {
        type: 'select',
        name: 'pets_children',
        label: 'Enfants / animaux sur place pendant le déménagement ?',
        options: [
          { label: 'Non', value: 'no' },
          { label: 'Oui', value: 'yes' },
        ],
      },

      { type: 'section', name: 'section_consent', label: '9. Consentements & assurance' },
      {
        type: 'checkbox',
        name: 'consent_weight',
        label: 'Poids maximum',
        required: true,
        options: [{ label: 'Je confirme qu’aucun objet ne dépasse 200 kg (sinon service spécialisé).', value: 'ok' }],
      },
      {
        type: 'checkbox',
        name: 'consent_paid',
        label: 'Options payantes',
        required: true,
        options: [{ label: 'Je comprends que démontage/remontage, nettoyage, stockage et cartons sont des options payantes.', value: 'ok' }],
      },
      {
        type: 'checkbox',
        name: 'insurance_consent',
        label: 'Assurance',
        required: true,
        options: [{ label: 'Je comprends que certains objets nécessitent une assurance supplémentaire.', value: 'ok' }],
      },
    ]}
    textarea={{
      label: 'Notes ou détails supplémentaires',
      placeholder: 'Escaliers étroits, objets très lourds, contraintes horaires, etc.',
      name: 'message',
    }}
    disclaimer={{
      label: 'En envoyant ce formulaire, j’accepte le traitement de mes données pour être recontacté.',
    }}
    description="Aucun engagement — devis gratuit sous 24h. Nous confirmons sous 1 jour ouvré."
  />
        </div>
      </div>
    </div>
  </section>

  <Features2
    title={isUrgent ? 'Contact direct urgence' : 'Contact direct'}
    subtitle={isUrgent ? 'Canaux prioritaires' : 'Choisissez le canal qui vous convient le mieux.'}
    classes={isUrgent ? { items: { panel: 'card' }, container: 'urgent-grid' } : {}}
    items={
      isUrgent
        ? [
            { title: 'Téléphone', description: '+41 76 798 27 93', icon: 'tabler:phone' },
            { title: 'Email', description: 'contact@lausannedemenagement.ch', icon: 'tabler:mail' },
            { title: 'WhatsApp', description: 'Réponse rapide sur créneau urgent', icon: 'tabler:brand-whatsapp' },
            { title: 'Disponibilité', description: 'Créneaux jour + soir/week-end selon charge', icon: 'tabler:calendar-time' },
          ]
        : [
            { title: 'WhatsApp', description: '+41 76 798 27 93', icon: 'tabler:phone' },
            { title: 'Email', description: 'pedro@pedrodemenagement.ch', icon: 'tabler:mail' },
            { title: 'Disponibilité', description: 'Du lundi au samedi, 8h00 – 18h00', icon: 'tabler:calendar-time' },
          ]
    }
  />
</Layout>

<style>
  :global(.contact-hero-light h1),
  :global(.contact-hero-light h2),
  :global(.contact-hero-light h3),
  :global(.contact-hero-light h4),
  :global(.contact-hero-light h5),
  :global(.contact-hero-light h6),
  :global(.contact-hero-light p),
  :global(.contact-hero-light .text-muted),
  :global(.contact-hero-light .tagline) {
    color: rgba(255, 255, 255, 0.92) !important;
  }
  :global(.contact-hero-light .rounded-xl.bg-white\\/5) {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.15);
  }
</style>
